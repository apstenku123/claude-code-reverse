/**
 * Retrieves the version from a subscription object generated by LM6, after cleaning the input string.
 *
 * @param {string} sourceObservable - The input string to process, possibly containing leading '=' or 'createRangeIterator' characters.
 * @param {object} config - Configuration object passed to LM6 for subscription generation.
 * @returns {string|null} The version string if available, otherwise null.
 */
function getVersionFromSubscription(sourceObservable, config) {
  // Remove leading and trailing whitespace, then strip leading '=' or 'createRangeIterator' characters
  const cleanedObservable = sourceObservable.trim().replace(/^[=createRangeIterator]+/, "");
  // Generate the subscription object using LM6
  const subscription = LM6(cleanedObservable, config);
  // Return the version if subscription exists, otherwise null
  return subscription ? subscription.version : null;
}

module.exports = getVersionFromSubscription;